<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>he-You - 永远相信美好的事物即将发</title><meta name="author" content="he-You"><meta name="copyright" content="he-You"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="永远相信美好的事物即将发生">
<meta property="og:type" content="website">
<meta property="og:title" content="he-You">
<meta property="og:url" content="https://he-you.github.io/index.html">
<meta property="og:site_name" content="he-You">
<meta property="og:description" content="永远相信美好的事物即将发生">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://he-you.github.io/img/avatar.jpeg">
<meta property="article:author" content="he-You">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://he-you.github.io/img/avatar.jpeg"><link rel="shortcut icon" href="/img/avatar.jpeg"><link rel="canonical" href="https://he-you.github.io/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-10-06 22:24:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = '1'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"></head><body><div id="loading-box"><div class="gear-loader"><div class="gear-loader_overlay"></div><div class="gear-loader_cogs"><div class="gear-loader_cogs__top"><div class="gear-top_part"></div><div class="gear-top_part"></div><div class="gear-top_part"></div><div class="gear-top_hole"></div></div><div class="gear-loader_cogs__left"><div class="gear-left_part"></div><div class="gear-left_part"></div><div class="gear-left_part"></div><div class="gear-left_hole"></div></div><div class="gear-loader_cogs__bottom"><div class="gear-bottom_part"></div><div class="gear-bottom_part"></div><div class="gear-bottom_part"></div><div class="gear-bottom_hole"></div></div></div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">69</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">44</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div id="body-wrap"><header class="no-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">he-You</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2023/09/28/MySQL%20InnoDB%E7%BC%93%E5%86%B2%E6%B1%A0/" title="MySQL InnoDB缓冲池">     <img class="post_bg" src="https://raw.githubusercontent.com/he-You/image/master/image-20230906110412875.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL InnoDB缓冲池"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/28/MySQL%20InnoDB%E7%BC%93%E5%86%B2%E6%B1%A0/" title="MySQL InnoDB缓冲池">MySQL InnoDB缓冲池</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time datetime="2023-10-06T14:23:47.223Z" title="更新于 2023-10-06 22:23:47">2023-10-06</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/MySQL/">MySQL</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/MySQL/">MySQL</a></span></div><div class="content">MySQL InnoDB缓冲池
上图是MySQL使用InnoDB存储引擎时，写操作的执行过程。而Buffer Pool缓冲池是InnoDB存储引擎中至关重要的部分，它负责加载磁盘中的数据，并将数据存入内存中，以此可以大大提高MySQL的读写操作的效率。下面会仔细介绍Buffer Pool中的数据结构
数据页我们操作的数据都是以表 + 行的方式，而表 + 行仅仅是逻辑上的概念，MySQL并不会像我们一样去操作行数据，而是抽象出来一个一个的数据页概念，默认大小16KB。一个数据页存放着多条数据，MySQL在执行读写操作时，会先定位到这条数据所在的数据页，然后将数据所在的数据页加载到Buffer Pool中。
数据页包括七个部分，结构如下图：

这 7 个部分的作用如下图：

在 File Header 中有两个指针，分别指向上一个数据页和下一个数据页，连接起来的页相当于一个双向的链表
缓存页当数据页被加载到缓冲池中后，Buffer Pool 中也有叫缓存页的概念与其一一对应，大小同样是 16KB，但是 MySQL还为每个缓存也开辟额外的一些空间，用来描述对应的缓存页的一些信息，例如：数据页 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2023/09/27/%E9%9D%A2%E8%AF%95%E5%A4%8D%E7%9B%98%EF%BC%882023-09-27%EF%BC%89/" title="面试复盘（2023-09-27）">     <img class="post_bg" src="https://raw.githubusercontent.com/he-You/image/master/y890Y_WuItw.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="面试复盘（2023-09-27）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/27/%E9%9D%A2%E8%AF%95%E5%A4%8D%E7%9B%98%EF%BC%882023-09-27%EF%BC%89/" title="面试复盘（2023-09-27）">面试复盘（2023-09-27）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time datetime="2023-09-27T09:50:08.431Z" title="更新于 2023-09-27 17:50:08">2023-09-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/%E5%A4%8D%E7%9B%98/">复盘</a></span></div><div class="content">电话面试，面试时长大约20分钟。自我介绍环节不赘述
Spring bean的生命周期Bean的生命周期大体可以分为4个阶段
实例化
实例化前：在实例化之前，Spring会扫描上下文，拿到BeanDefinition，并且会判断是否有其他BeanDefinition，如果有的话会进行合并
然后调用BeanFactory所设置的类加载器进行加载，如果没有设置则使用ClassUtils.getDefaultClassLoader()方法返回的类加载器进行加载
实例化，通过反射得到一个实例对象

属性赋值在属性赋值阶段主要是为 Bean 设置相关属性和依赖，Spring会根据配置文件或注解中的属性值，将对应的值注入到Bean中。
在进行属性赋值时，Spring会递归地处理Bean之间的依赖关系。如果一个Bean依赖于另一个Bean，Spring会先创建被依赖的Bean，并将其注入到需要依赖它的Bean中。
初始化Spring初始化是在属性赋值完成后，容器对Bean进行了一下额外的处理，使Bean达到可用的状态的过程。具体来说会有以下工作：

如果Bean实现了InitializingBean接 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2023/09/26/%E4%B8%80%E8%A1%8C%E6%97%A5%E5%BF%97%E5%AF%BC%E8%87%B4%E7%9A%84OOM%E4%BA%8B%E4%BB%B6/" title="一行日志导致的OOM事件">     <img class="post_bg" src="https://raw.githubusercontent.com/he-You/image/master/y890Y_WuItw.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="一行日志导致的OOM事件"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/26/%E4%B8%80%E8%A1%8C%E6%97%A5%E5%BF%97%E5%AF%BC%E8%87%B4%E7%9A%84OOM%E4%BA%8B%E4%BB%B6/" title="一行日志导致的OOM事件">一行日志导致的OOM事件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time datetime="2023-09-26T16:10:11.969Z" title="更新于 2023-09-27 00:10:11">2023-09-27</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/JVM/">JVM</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/OOM/">OOM</a></span></div><div class="content">一行日志导致的OOM事件问题现象简单交代一下问题背景和现象：产线SSO登录服务运行一段时间就会出现LDAP连接无响应，最终导致客户端超时的现象，并且通过日志观察，存在大量OOM异常
问题排查过程
联系运维，拉取nginx的access log 查看请求源ip，判断是否存在测试脚本频繁请求

经过排查发现并不是外部请求导致的OOM

然后拉取了dump日志文件

怀疑存在内存泄露，发现有个对象占用了3.7G内存




查看该对象具体信息，发现属性workQueue占用了3.7G，明显是一个队列，翻一翻源码去




看看队列是哪里消费的，先理一下代码逻辑
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091private class Worker implements Runnable &#123 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2023/09/22/%E9%98%BF%E9%87%8C%E9%A3%9E%E7%8C%AA%E9%9D%A2%E8%AF%95%E5%A4%8D%E7%9B%98/" title="阿里飞猪面试复盘（2023-09-22）">     <img class="post_bg" src="https://raw.githubusercontent.com/he-You/image/master/y890Y_WuItw.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="阿里飞猪面试复盘（2023-09-22）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/22/%E9%98%BF%E9%87%8C%E9%A3%9E%E7%8C%AA%E9%9D%A2%E8%AF%95%E5%A4%8D%E7%9B%98/" title="阿里飞猪面试复盘（2023-09-22）">阿里飞猪面试复盘（2023-09-22）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time datetime="2023-09-23T04:49:58.179Z" title="更新于 2023-09-23 12:49:58">2023-09-23</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/%E5%A4%8D%E7%9B%98/">复盘</a></span></div><div class="content">电话面试，面试时长大约40分钟。自我介绍环节不赘述
mq消息丢失问题首先要明确，消息从生产到消费完成这个过程，可以分成三个阶段，分别为：消息生产阶段、消息存储阶段和消息消费阶段


消息生产阶段： 从消息被生产出来，然后提交给 MQ 的过程中，只要能正常收到 MQ Broker 的 ack 确认响应，就表示发送成功，所以只要处理好返回值和异常，这个阶段是不会出现消息丢失的。
消息存储阶段： 这个阶段一般会直接交给 MQ 消息中间件来保证，但是你要了解它的原理，比如 Broker 会做副本，保证一条消息至少同步两个节点再返回 ack
消息消费阶段： 消费端从 Broker 上拉取消息，只要消费端在收到消息后，不立即发送消费确认给 Broker，而是等到执行完业务逻辑后，再发送消费确认，也能保证消息的不丢失。

如何保证消息可靠投递
消息持久化：MQ可以将消息存储到磁盘中，即使MQ服务器崩溃或重启，也能够保证消息不会丢失。同时，MQ还可以通过主从复制等方式保证高可用性。
消息确认机制：当消费者消费完一条消息后，向MQ服务器发送确认消息，告诉MQ服务器该消息已经被消费，MQ服务器才会将该消息 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2023/09/17/MySQL%20bigint%E5%92%8Cvarchar%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83%E7%9A%84%E5%9D%91/" title="MySQL bigint和varchar进行比较的坑">     <img class="post_bg" src="https://raw.githubusercontent.com/he-You/image/master/image-20230906110412875.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL bigint和varchar进行比较的坑"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/17/MySQL%20bigint%E5%92%8Cvarchar%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83%E7%9A%84%E5%9D%91/" title="MySQL bigint和varchar进行比较的坑">MySQL bigint和varchar进行比较的坑</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time datetime="2023-09-20T03:48:37.925Z" title="更新于 2023-09-20 11:48:37">2023-09-20</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/MySQL/">MySQL</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/">踩坑记录</a></span></div><div class="content">MySQL bigint和varchar进行比较的坑问题背景这个问题是出在产线列表接口中，返回的数据量与预期的数据量不相符。由于列表是有数据权限的，当时以为是数据权限有问题。
排查过程由于这个列表功能已经上线1年多了，而且最近一段时间一直没有对这块功能进行迭代。所以起初我排除了代码逻辑变动导致的问题。由于产品管理列表有权限控制，所以我开始怀疑是不是账号权限模型有问题。
问题定位
从打印的日志来看，数据权限并不多，然后结合项目中查询语句，在数据库中执行了一下

从sql的执行结果来看，确实有1300+的记录。但是仔细看一下结果集中的platform_client_id这一列值，是有很多不一样的值的。根据客户关系模型来看，platform_client_id应该不超过2个不一样的值的。这个时候问题的范围就缩小了，所以我就猜测是不是因为平台表中的platform_client_id的字段类型是varchar，而在客户表中的主键是bigint类型。不同的类型的字段进行数值比较的时候出现了差异，类似java中float类型精度丢失的问题。
问题验证修改mybatis中的查询语句，将where条件 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2023/09/14/%E8%B7%A8%E9%9B%86%E7%BE%A4MQ%E9%80%9A%E4%BF%A1%E6%96%B9%E6%A1%88/" title="跨集群/服务商MQ通信方案">     <img class="post_bg" src="https://raw.githubusercontent.com/he-You/image/master/apache_rocketmq.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="跨集群/服务商MQ通信方案"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/14/%E8%B7%A8%E9%9B%86%E7%BE%A4MQ%E9%80%9A%E4%BF%A1%E6%96%B9%E6%A1%88/" title="跨集群/服务商MQ通信方案">跨集群/服务商MQ通信方案</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time datetime="2023-09-17T02:52:50.564Z" title="更新于 2023-09-17 10:52:50">2023-09-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/RocketMQ/">RocketMQ</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">解决方案</a></span></div><div class="content">跨服务商MQ通信方案思路背景现在下游有若干服务需要监听Pass服务开通业务的结果消息，但是由于上下游服务在不同的集群环境中，在不同的云服务商的服务器中。传统的服务直接的交互如下图

A服务和B服务直接通过http请求进行连接数据传输等交互，但是在此场景中。由于下游服务不会同步阻塞等待上游服务的消息，而是通过监听MQ消息实现异步处理。但AB两个服务在不同的云服务商的服务器中，各自有各自MQ实例，由于服务商之间的网络不通，无法直接监听对方的MQ消息。
设计方案方案的思路是，在不同的集群环境中搭建同样一套代理服务，组成一个代理层服务，用于不同集群的消息交换。如下图

这样，整个业务链路分为了三个部分：A服务，消息代理层，B服务。其中：

消息代理层由腾讯云中的消息代理服务A和阿里云消息代理服务B共同组成
各自代理服务负责对本集群中的服务消息进行收发
代理服务之间通过http请求进行消息的传递

通过引入消息代理层，使得AB两个业务服务不需要进行定制化改造，A服务只需要将业务消息投递到消息代理层，B服务只需要监听消息代理层的消息。AB服务之间无感。后续的改动，只需要对消息代理层进行改动完善，而 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2023/09/13/%E4%BB%8Emap%E4%B8%AD%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E8%B0%88@Refresh/" title="从map中数据丢失谈@RefreshScope">     <img class="post_bg" src="https://raw.githubusercontent.com/he-You/image/master/image-20230905220416453.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从map中数据丢失谈@RefreshScope"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/13/%E4%BB%8Emap%E4%B8%AD%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1%E8%B0%88@Refresh/" title="从map中数据丢失谈@RefreshScope">从map中数据丢失谈@RefreshScope</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time datetime="2023-09-13T03:56:37.231Z" title="更新于 2023-09-13 11:56:37">2023-09-13</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Spring-Cloud/">Spring Cloud</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/Spring%E3%80%81nacos/">Spring、nacos</a></span></div><div class="content">从map中数据丢失谈@RefreshScope问题场景先展示一段出现问题代码：
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576@Component@Slf4j@RefreshScope@ConditionalOnProperty(name = &quot;rule.enable&quot;, havingValue = &quot;true&quot;)public class FlowDynamicConsumer &#123;    @Value(&quot;$&#123;rocketmq.name-server&#125;&quot;)    private String rocketMqServer;    /**     * 1.根据 nameServer 的地址以及 topic 和 tag 进行唯一性判断     * 2.用 map 维护 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2023/09/11/Spring%20AOP/" title="Spring AOP(一)基础知识点">     <img class="post_bg" src="https://raw.githubusercontent.com/he-You/image/master/image-20230905220416453.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring AOP(一)基础知识点"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/11/Spring%20AOP/" title="Spring AOP(一)基础知识点">Spring AOP(一)基础知识点</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time datetime="2023-09-12T01:48:31.807Z" title="更新于 2023-09-12 09:48:31">2023-09-12</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/Spring/">Spring</a></span></div><div class="content">Spring AOPJDK动态代理在java的动态代理机制中，有两个重要的类或接口，一个是 InvocationHandler(Interface)、另一个则是 Proxy(Class)，这一个类和接口是实现我们动态代理所必须用到的。
InvocationHandler接口每一个动态代理类都必须要实现InvocationHandler这个接口，并且每个代理类的实例都关联了一个handler，当我们通过代理对象调用一个方法的时候，这个方法的调用就会被转发为由InvocationHandler这个接口的 invoke 方法来进行调用。
InvocationHandler这个接口的唯一一个方法 invoke 方法：
1Object invoke(Object proxy, Method method, Object[] args) throws Throwable

这个方法一共接受三个参数，那么这三个参数分别代表如下：

proxy:指代JDK动态生成的最终代理对象
method:指代的是我们所要调用真实对象的某个方法的Method对象
args:指代的是调用真实对象某个方法时接受的参数
 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2023/09/10/Spring%20%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/" title="Spring 启动过程">     <img class="post_bg" src="https://raw.githubusercontent.com/he-You/image/master/image-20230905220416453.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring 启动过程"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/10/Spring%20%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/" title="Spring 启动过程">Spring 启动过程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time datetime="2023-09-11T06:54:24.294Z" title="更新于 2023-09-11 14:54:24">2023-09-11</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/Spring/">Spring</a></span></div><div class="content">Spring 启动过程这里说的Spring启动，就是构造ApplicationContext对象以及调用refresh()方法的过程。
总体来说，Spring启动过程主要做了这些事情：

构造BeanFactory对象
解析配置类，得到BeanDefinition,并注册到BeanFactory中
初始化MessageSource对象，支持ApplicationContext的国际化
初始化ApplicationEventMulticaster对象，支持ApplicationContext事件机制
将用户定义的ApplicationListener对象添加到ApplicationContext中，等Spring启动后发布事件
创建非懒加载的单例Bean，并存入BeanFactory的单例池中。
调用Lifecycle Bean的start()方法
发布ContextRefreshedEvent事件

由于Spring启动过程要创建非懒加载的单例Bean对象，那么就需要BeanPostProcessor，所以Spring在启动过程中就需要做两件事：

生成默认的BeanPostProce ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2023/09/10/Spring%20IoC%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/" title="Spring IoC的工作流程">     <img class="post_bg" src="https://raw.githubusercontent.com/he-You/image/master/image-20230905220416453.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring IoC的工作流程"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/09/10/Spring%20IoC%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B/" title="Spring IoC的工作流程">Spring IoC的工作流程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time datetime="2023-09-10T09:43:16.590Z" title="更新于 2023-09-10 17:43:16">2023-09-10</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox article-meta__icon"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag article-meta__icon"></i><a class="article-meta__tags" href="/tags/Spring/">Spring</a></span></div><div class="content">Ioc的定义IOC 的全称是 Inversion Of Control, 也就是控制反转，它的核心思想是把对象的管理权限交给容器，应用程序如果需要使用到某个对象实例，直接从 IOC 容器中去获取就 行，这样设计的好处是降低了程序里面对象与对象之间的耦合性。 使得程序的整个体系结构变得更加灵活。
工作流程Spring Ioc的工作流程大致可以分为两个阶段
Ioc容器的初始化这个阶段主要是根据程序中定义的 XML 或者注解等 Bean 的声明方式 (如图)通过解析和加载后生成 BeanDefinition，然后把 BeanDefinition 注册到 IOC 容器。

最后把这个 BeanDefinition 保存到一个 Map 集合里面，从而完成了 IOC 的初始化。 IoC 容器的作用就是对这些注册的 Bean 的定义信息进行处理和维护，它 IoC 容器控制 反转的核心。
Bean的初始化以及依赖注入在这个阶段会处理两个事情：

通过反射针对没有设置lazy-init属性的单例bean进行初始化
完成bean的依赖注入


</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">he-You</div><div class="author-info__description">永远相信美好的事物即将发生</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">69</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">44</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/he-You"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/he-You" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">种一棵树的最好时间是十年前，其次是现在</div></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/09/28/MySQL%20InnoDB%E7%BC%93%E5%86%B2%E6%B1%A0/" title="MySQL InnoDB缓冲池"><img src="https://raw.githubusercontent.com/he-You/image/master/image-20230906110412875.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL InnoDB缓冲池"/></a><div class="content"><a class="title" href="/2023/09/28/MySQL%20InnoDB%E7%BC%93%E5%86%B2%E6%B1%A0/" title="MySQL InnoDB缓冲池">MySQL InnoDB缓冲池</a><time datetime="2023-09-28T07:54:44.889Z" title="发表于 2023-09-28 15:54:44">2023-09-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/27/%E9%9D%A2%E8%AF%95%E5%A4%8D%E7%9B%98%EF%BC%882023-09-27%EF%BC%89/" title="面试复盘（2023-09-27）"><img src="https://raw.githubusercontent.com/he-You/image/master/y890Y_WuItw.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="面试复盘（2023-09-27）"/></a><div class="content"><a class="title" href="/2023/09/27/%E9%9D%A2%E8%AF%95%E5%A4%8D%E7%9B%98%EF%BC%882023-09-27%EF%BC%89/" title="面试复盘（2023-09-27）">面试复盘（2023-09-27）</a><time datetime="2023-09-27T09:26:20.103Z" title="发表于 2023-09-27 17:26:20">2023-09-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/26/%E4%B8%80%E8%A1%8C%E6%97%A5%E5%BF%97%E5%AF%BC%E8%87%B4%E7%9A%84OOM%E4%BA%8B%E4%BB%B6/" title="一行日志导致的OOM事件"><img src="https://raw.githubusercontent.com/he-You/image/master/y890Y_WuItw.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="一行日志导致的OOM事件"/></a><div class="content"><a class="title" href="/2023/09/26/%E4%B8%80%E8%A1%8C%E6%97%A5%E5%BF%97%E5%AF%BC%E8%87%B4%E7%9A%84OOM%E4%BA%8B%E4%BB%B6/" title="一行日志导致的OOM事件">一行日志导致的OOM事件</a><time datetime="2023-09-26T15:42:00.349Z" title="发表于 2023-09-26 23:42:00">2023-09-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/22/%E9%98%BF%E9%87%8C%E9%A3%9E%E7%8C%AA%E9%9D%A2%E8%AF%95%E5%A4%8D%E7%9B%98/" title="阿里飞猪面试复盘（2023-09-22）"><img src="https://raw.githubusercontent.com/he-You/image/master/y890Y_WuItw.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="阿里飞猪面试复盘（2023-09-22）"/></a><div class="content"><a class="title" href="/2023/09/22/%E9%98%BF%E9%87%8C%E9%A3%9E%E7%8C%AA%E9%9D%A2%E8%AF%95%E5%A4%8D%E7%9B%98/" title="阿里飞猪面试复盘（2023-09-22）">阿里飞猪面试复盘（2023-09-22）</a><time datetime="2023-09-22T13:52:32.246Z" title="发表于 2023-09-22 21:52:32">2023-09-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/09/17/MySQL%20bigint%E5%92%8Cvarchar%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83%E7%9A%84%E5%9D%91/" title="MySQL bigint和varchar进行比较的坑"><img src="https://raw.githubusercontent.com/he-You/image/master/image-20230906110412875.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL bigint和varchar进行比较的坑"/></a><div class="content"><a class="title" href="/2023/09/17/MySQL%20bigint%E5%92%8Cvarchar%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83%E7%9A%84%E5%9D%91/" title="MySQL bigint和varchar进行比较的坑">MySQL bigint和varchar进行比较的坑</a><time datetime="2023-09-17T02:52:57.841Z" title="发表于 2023-09-17 10:52:57">2023-09-17</time></div></div></div></div></div><div class="card-widget card-categories"><div class="card-content"><div class="item-headline"><i class="fas fa-folder-open"></i><span>分类</span></div><ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ElasticSearch/"><span class="card-category-list-name">ElasticSearch</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JVM/"><span class="card-category-list-name">JVM</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">13</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"><span class="card-category-list-name">Java并发编程</span><span class="card-category-list-count">14</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/MySQL/"><span class="card-category-list-name">MySQL</span><span class="card-category-list-count">10</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Redis/"><span class="card-category-list-name">Redis</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/RocketMQ/"><span class="card-category-list-name">RocketMQ</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Spring/"><span class="card-category-list-name">Spring</span><span class="card-category-list-count">9</span></a></li>
            <li class="card-category-list-item more is-center"><a class="card-category-list-link-more" href="/categories/">
                <span>查看更多</span><i class="fas fa-angle-right"></i></a></li>
            </ul></div></div><div class="card-widget card-tags"><div class="card-content"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/AQS/" style="font-size: 1.1em; color: #999">AQS</a> <a href="/tags/Elasticsearch/" style="font-size: 1.1em; color: #999">Elasticsearch</a> <a href="/tags/Explain/" style="font-size: 1.1em; color: #999">Explain</a> <a href="/tags/JDK11/" style="font-size: 1.1em; color: #999">JDK11</a> <a href="/tags/JUC/" style="font-size: 1.1em; color: #999">JUC</a> <a href="/tags/JVM/" style="font-size: 1.1em; color: #999">JVM</a> <a href="/tags/Java8/" style="font-size: 1.1em; color: #999">Java8</a> <a href="/tags/Java%E7%89%B9%E6%80%A7%E6%9C%BA%E5%88%B6/" style="font-size: 1.1em; color: #999">Java特性机制</a> <a href="/tags/MySQL/" style="font-size: 1.42em; color: #99a6b7">MySQL</a> <a href="/tags/Nacos/" style="font-size: 1.1em; color: #999">Nacos</a> <a href="/tags/OAuth2-0/" style="font-size: 1.1em; color: #999">OAuth2.0</a> <a href="/tags/OOM/" style="font-size: 1.1em; color: #999">OOM</a> <a href="/tags/Redis/" style="font-size: 1.26em; color: #999fa8">Redis</a> <a href="/tags/Spring/" style="font-size: 1.34em; color: #99a3b0">Spring</a> <a href="/tags/SpringBean/" style="font-size: 1.1em; color: #999">SpringBean</a> <a href="/tags/SpringBoot/" style="font-size: 1.1em; color: #999">SpringBoot</a> <a href="/tags/Spring%E3%80%81nacos/" style="font-size: 1.1em; color: #999">Spring、nacos</a> <a href="/tags/Unsafe/" style="font-size: 1.1em; color: #999">Unsafe</a> <a href="/tags/noSQL/" style="font-size: 1.1em; color: #999">noSQL</a> <a href="/tags/%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC/" style="font-size: 1.1em; color: #999">事件监听</a> <a href="/tags/%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6/" style="font-size: 1.1em; color: #999">事务机制</a> <a href="/tags/%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/" style="font-size: 1.1em; color: #999">使用技巧</a> <a href="/tags/%E5%90%8C%E6%AD%A5/" style="font-size: 1.1em; color: #999">同步</a> <a href="/tags/%E5%A4%8D%E7%9B%98/" style="font-size: 1.18em; color: #999ca1">复盘</a> <a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 1.1em; color: #999">容器</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 1.5em; color: #99a9bf">并发</a> <a href="/tags/%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8/" style="font-size: 1.1em; color: #999">并发容器</a> <a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="font-size: 1.26em; color: #999fa8">并发编程</a> <a href="/tags/%E5%BC%82%E5%B8%B8/" style="font-size: 1.1em; color: #999">异常</a> <a href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" style="font-size: 1.1em; color: #999">异常处理</a> <a href="/tags/%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96/" style="font-size: 1.1em; color: #999">循环依赖</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size: 1.1em; color: #999">数据类型</a> <a href="/tags/%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%E7%BB%84%E4%BB%B6/" style="font-size: 1.1em; color: #999">服务调用组件</a> <a href="/tags/%E6%A0%91/" style="font-size: 1.1em; color: #999">树</a> <a href="/tags/%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/" style="font-size: 1.1em; color: #999">注册中心</a> <a href="/tags/%E6%BA%90%E7%A0%81/" style="font-size: 1.1em; color: #999">源码</a> <a href="/tags/%E7%B4%A2%E5%BC%95/" style="font-size: 1.1em; color: #999">索引</a> <a href="/tags/%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF/" style="font-size: 1.1em; color: #999">缓存击穿</a> <a href="/tags/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" style="font-size: 1.18em; color: #999ca1">解决方案</a> <a href="/tags/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%99%A8/" style="font-size: 1.1em; color: #999">负载均衡器</a></div></div></div><div class="card-widget card-archives"><div class="card-content"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">17</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/10/"><span class="card-archive-list-date">十月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">五月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">四月 2021</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">三月 2021</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/02/"><span class="card-archive-list-date">二月 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item more is-center"><a class="card-archive-list-link-more" href="/archives/">
              <span>查看更多</span><i class="fas fa-angle-right"  ></i></a></li></ul></div></div><div class="card-widget card-webinfo"><div class="card-content"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">69</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-10-06T14:24:06.102Z"></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By he-You</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})</script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script>(function(){
  const bp = document.createElement('script');
  const curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  bp.dataset.pjax = ''
  const s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})()</script></div></body></html>